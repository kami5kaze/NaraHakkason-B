from linebot.models import URIAction,MessageAction,TemplateSendMessage,ButtonsTemplate,MessageEvent

shop_telList={
    "吉田薬店":"+0742332501",
    "衣川薬局":"+0742955268",
    "とくし丸":"+07064723571",
    "まごころ弁当(奈良中央店)":"+0742340505",
    "杉本米酒店":"+0742332731",
    "池田米酒店":"+0742330023",
    "たじ元米酒店":"+0742236409",
    "こにし":"+0742238008",
    "グランマルシェ(押熊店)":"+0742469337",
    "おこめのきはら":"+0742450227",
    "よしかわ青果店":"+0742435533",
    "ヤマザキYショップ":"+074243687",
    "八百屋 ろ":"+0742481076",
    "フードショップ いろは":"+0742460298",
    # 後に追加
}

ListLength= len(shop_telList)
telListNum=0

def tel_call_template(telListNum):
    buttons =[]

    end_index = min(telListNum+3,len(shop_telList))

    for i,(shop_name,tel) in enumerate(list(shop_telList.items())[telListNum:end_index],start=1):
        action=MessageAction(label=shop_name,text=f'電話をかける: {tel}')
        buttons.append(action)

    if end_index < len(shop_telList):
        buttons.append(MessageAction(label='なし',text='次の3件を表示'))


    message_template = TemplateSendMessage(      # テンプレートメッセージ
        alt_text='電話注文をするお店を選んでください',
        template=ButtonsTemplate(                # ボタンテンプレート
            text='',
            title='お店選択',
            actions=buttons
        )
    )
    return message_template   


